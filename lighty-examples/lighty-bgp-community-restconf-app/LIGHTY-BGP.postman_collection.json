{
	"info": {
		"_postman_id": "903dacee-5543-4b97-b5c6-9fb50722dcce",
		"name": "LIGHTY-BGP",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Topology",
			"item": [
				{
					"name": "Create topology provider",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW4="
							},
							{
								"key": "Content-Type",
								"value": "application/xml"
							},
							{
								"key": "Cache-Control",
								"value": "no-cache"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "<topology xmlns=\"urn:TBD:params:xml:ns:yang:network-topology\">\n    <topology-id>bgp-example-ipv4-topology</topology-id>\n    <topology-types>\n        <bgp-ipv4-reachability-topology xmlns=\"urn:opendaylight:params:xml:ns:yang:odl-bgp-topology-types\"></bgp-ipv4-reachability-topology>\n    </topology-types>\n    <rib-id xmlns=\"urn:opendaylight:params:xml:ns:yang:odl-bgp-topology-config\">bgp-example</rib-id>\n</topology>"
						},
						"url": {
							"raw": "http://{{lighty-host}}:{{lighty-port}}/restconf/data/network-topology:network-topology",
							"protocol": "http",
							"host": [
								"{{lighty-host}}"
							],
							"port": "{{lighty-port}}",
							"path": [
								"restconf",
								"data",
								"network-topology:network-topology"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get topology view",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Basic YWRtaW46YWRtaW4="
							},
							{
								"key": "Content-Type",
								"value": "application/xml"
							},
							{
								"key": "Cache-Control",
								"value": "no-cache"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "http://{{lighty-host}}:{{lighty-port}}/restconf/data/network-topology:network-topology",
							"protocol": "http",
							"host": [
								"{{lighty-host}}"
							],
							"port": "{{lighty-port}}",
							"path": [
								"restconf",
								"data",
								"network-topology:network-topology"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Protocol instance",
			"item": [
				{
					"name": "Create BGP protocol instance",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "<protocol xmlns=\"http://openconfig.net/yang/network-instance\">\n    <name>bgp-example</name>\n    <identifier xmlns:x=\"http://openconfig.net/yang/policy-types\">x:BGP</identifier>\n    <bgp xmlns=\"urn:opendaylight:params:xml:ns:yang:bgp:openconfig-extensions\">\n        <global>\n            <config>\n                <router-id>{{lighty-host}}</router-id>\n                <as>64496</as>\n            </config>\n            <apply-policy>\n                <config>\n                    <default-export-policy>REJECT-ROUTE</default-export-policy>\n                    <default-import-policy>REJECT-ROUTE</default-import-policy>\n                    <import-policy>default-odl-import-policy</import-policy>\n                    <export-policy>default-odl-export-policy</export-policy>\n                </config>\n            </apply-policy>\n        </global>\n    </bgp>\n</protocol>",
							"options": {
								"raw": {
									"language": "xml"
								}
							}
						},
						"url": {
							"raw": "http://{{lighty-host}}:{{lighty-port}}/restconf/data/openconfig-network-instance:network-instances/network-instance=global-bgp/openconfig-network-instance:protocols",
							"protocol": "http",
							"host": [
								"{{lighty-host}}"
							],
							"port": "{{lighty-port}}",
							"path": [
								"restconf",
								"data",
								"openconfig-network-instance:network-instances",
								"network-instance=global-bgp",
								"openconfig-network-instance:protocols"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get created RIB",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "xml"
								}
							}
						},
						"url": {
							"raw": "http://{{lighty-host}}:{{lighty-port}}/restconf/data/bgp-rib:bgp-rib",
							"protocol": "http",
							"host": [
								"{{lighty-host}}"
							],
							"port": "{{lighty-port}}",
							"path": [
								"restconf",
								"data",
								"bgp-rib:bgp-rib"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "BGP peers",
			"item": [
				{
					"name": "Create peer group",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "<peer-group xmlns=\"urn:opendaylight:params:xml:ns:yang:bgp:openconfig-extensions\">\n    <peer-group-name>external-neighbor</peer-group-name>\n    <config>\n        <peer-type>EXTERNAL</peer-type>\n        <peer-as>64496</peer-as>\n    </config>\n    <transport>\n        <config>\n            <remote-port>17900</remote-port>\n        </config>\n    </transport>\n    <graceful-restart>\n        <config>\n            <restart-time>60</restart-time>\n        </config>\n    </graceful-restart>\n    <afi-safis>\n        <afi-safi>\n            <afi-safi-name xmlns:x=\"http://openconfig.net/yang/bgp-types\">x:IPV4-UNICAST</afi-safi-name>\n            <graceful-restart>\n                <config>\n                    <enabled>true</enabled>\n                </config>\n            </graceful-restart>\n        </afi-safi>\n        <afi-safi>\n            <afi-safi-name xmlns:x=\"http://openconfig.net/yang/bgp-types\">x:IPV6-UNICAST</afi-safi-name>\n            <graceful-restart>\n                <config>\n                    <enabled>true</enabled>\n                </config>\n            </graceful-restart>\n        </afi-safi>\n        <afi-safi>\n            <afi-safi-name xmlns:x=\"http://openconfig.net/yang/bgp-types\">x:IPV4-LABELLED-UNICAST</afi-safi-name>\n            <graceful-restart>\n                <config>\n                    <enabled>true</enabled>\n                </config>\n            </graceful-restart>\n        </afi-safi>\n        <afi-safi>\n            <afi-safi-name xmlns:x=\"http://openconfig.net/yang/bgp-types\">x:IPV6-LABELLED-UNICAST</afi-safi-name>\n            <graceful-restart>\n                <config>\n                    <enabled>true</enabled>\n                </config>\n            </graceful-restart>\n        </afi-safi>\n        <afi-safi>\n            <afi-safi-name xmlns:x=\"http://openconfig.net/yang/bgp-types\">x:L3VPN-IPV4-UNICAST</afi-safi-name>\n            <graceful-restart>\n                <config>\n                    <enabled>true</enabled>\n                </config>\n            </graceful-restart>\n        </afi-safi>\n        <afi-safi>\n            <afi-safi-name xmlns:x=\"http://openconfig.net/yang/bgp-types\">x:L3VPN-IPV6-UNICAST</afi-safi-name>\n            <graceful-restart>\n                <config>\n                    <enabled>true</enabled>\n                </config>\n            </graceful-restart>\n        </afi-safi>\n        <afi-safi>\n            <afi-safi-name xmlns:x=\"http://openconfig.net/yang/bgp-types\">x:L3VPN-IPV4-MULTICAST</afi-safi-name>\n            <graceful-restart>\n                <config>\n                    <enabled>true</enabled>\n                </config>\n            </graceful-restart>\n        </afi-safi>\n        <afi-safi>\n            <afi-safi-name xmlns:x=\"http://openconfig.net/yang/bgp-types\">x:L3VPN-IPV6-MULTICAST</afi-safi-name>\n            <graceful-restart>\n                <config>\n                    <enabled>true</enabled>\n                </config>\n            </graceful-restart>\n        </afi-safi>\n        <afi-safi>\n            <afi-safi-name xmlns:x=\"http://openconfig.net/yang/bgp-types\">x:L2VPN-EVPN</afi-safi-name>\n            <graceful-restart>\n                <config>\n                    <enabled>true</enabled>\n                </config>\n            </graceful-restart>\n        </afi-safi>\n        <afi-safi>\n            <afi-safi-name>LINKSTATE</afi-safi-name>\n            <graceful-restart>\n                <config>\n                    <enabled>true</enabled>\n                </config>\n            </graceful-restart>\n        </afi-safi>\n        <afi-safi>\n            <afi-safi-name>IPV6-FLOW</afi-safi-name>\n            <graceful-restart>\n                <config>\n                    <enabled>true</enabled>\n                </config>\n            </graceful-restart>\n        </afi-safi>\n        <afi-safi>\n            <afi-safi-name>IPV4-L3VPN-FLOW</afi-safi-name>\n            <graceful-restart>\n                <config>\n                    <enabled>true</enabled>\n                </config>\n            </graceful-restart>\n        </afi-safi>\n        <afi-safi>\n            <afi-safi-name>IPV6-L3VPN-FLOW</afi-safi-name>\n            <graceful-restart>\n                <config>\n                    <enabled>true</enabled>\n                </config>\n            </graceful-restart>\n        </afi-safi>\n        <afi-safi>\n            <afi-safi-name>IPV4-MCAST-VPN</afi-safi-name>\n            <graceful-restart>\n                <config>\n                    <enabled>true</enabled>\n                </config>\n            </graceful-restart>\n        </afi-safi>\n        <afi-safi>\n            <afi-safi-name>IPV6-MCAST-VPN</afi-safi-name>\n            <graceful-restart>\n                <config>\n                    <enabled>true</enabled>\n                </config>\n            </graceful-restart>\n        </afi-safi>\n        <afi-safi>\n            <afi-safi-name>ROUTE-TARGET-CONSTRAIN</afi-safi-name>\n            <graceful-restart>\n                <config>\n                    <enabled>true</enabled>\n                </config>\n            </graceful-restart>\n        </afi-safi>\n    </afi-safis>\n</peer-group>",
							"options": {
								"raw": {
									"language": "xml"
								}
							}
						},
						"url": {
							"raw": "http://{{lighty-host}}:{{lighty-port}}/restconf/data/openconfig-network-instance:network-instances/network-instance=global-bgp/openconfig-network-instance:protocols/protocol=openconfig-policy-types%3ABGP,bgp-example/bgp-openconfig-extensions:bgp/peer-groups",
							"protocol": "http",
							"host": [
								"{{lighty-host}}"
							],
							"port": "{{lighty-port}}",
							"path": [
								"restconf",
								"data",
								"openconfig-network-instance:network-instances",
								"network-instance=global-bgp",
								"openconfig-network-instance:protocols",
								"protocol=openconfig-policy-types%3ABGP,bgp-example",
								"bgp-openconfig-extensions:bgp",
								"peer-groups"
							]
						}
					},
					"response": []
				},
				{
					"name": "Connect peer",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "<neighbor xmlns=\"urn:opendaylight:params:xml:ns:yang:bgp:openconfig-extensions\">\n    <neighbor-address>127.0.0.2</neighbor-address>\n    <config>\n        <peer-group>/bgp/neighbors/neighbor/bgp/peer-groups/peer-group[peer-group-name=\"external-neighbor\"]</peer-group>\n    </config>\n</neighbor>",
							"options": {
								"raw": {
									"language": "xml"
								}
							}
						},
						"url": {
							"raw": "http://{{lighty-host}}:{{lighty-port}}/restconf/data/openconfig-network-instance:network-instances/network-instance=global-bgp/openconfig-network-instance:protocols/protocol=openconfig-policy-types%3ABGP,bgp-example/bgp-openconfig-extensions:bgp/neighbors",
							"protocol": "http",
							"host": [
								"{{lighty-host}}"
							],
							"port": "{{lighty-port}}",
							"path": [
								"restconf",
								"data",
								"openconfig-network-instance:network-instances",
								"network-instance=global-bgp",
								"openconfig-network-instance:protocols",
								"protocol=openconfig-policy-types%3ABGP,bgp-example",
								"bgp-openconfig-extensions:bgp",
								"neighbors"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get peer state",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/xml"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "http://{{lighty-host}}:{{lighty-port}}/restconf/data/openconfig-network-instance:network-instances/network-instance=global-bgp/openconfig-network-instance:protocols/protocol=openconfig-policy-types%3ABGP,bgp-example/bgp-openconfig-extensions:bgp/neighbors/neighbor=127.0.0.2/state",
							"protocol": "http",
							"host": [
								"{{lighty-host}}"
							],
							"port": "{{lighty-port}}",
							"path": [
								"restconf",
								"data",
								"openconfig-network-instance:network-instances",
								"network-instance=global-bgp",
								"openconfig-network-instance:protocols",
								"protocol=openconfig-policy-types%3ABGP,bgp-example",
								"bgp-openconfig-extensions:bgp",
								"neighbors",
								"neighbor=127.0.0.2",
								"state"
							]
						}
					},
					"response": []
				},
				{
					"name": "Connect multiple peers",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "<neighbors xmlns=\"urn:opendaylight:params:xml:ns:yang:bgp:openconfig-extensions\">\n    <neighbor>\n        <neighbor-address>127.0.0.2</neighbor-address>\n        <config>\n            <peer-group>/bgp/neighbors/neighbor/bgp/peer-groups/peer-group[peer-group-name=\"external-neighbor\"]</peer-group>\n        </config>\n    </neighbor>\n    <neighbor>\n        <neighbor-address>127.0.0.3</neighbor-address>\n        <config>\n            <peer-group>/bgp/neighbors/neighbor/bgp/peer-groups/peer-group[peer-group-name=\"external-neighbor\"]</peer-group>\n        </config>\n    </neighbor>\n    <neighbor>\n        <neighbor-address>127.0.0.4</neighbor-address>\n        <config>\n            <peer-group>/bgp/neighbors/neighbor/bgp/peer-groups/peer-group[peer-group-name=\"external-neighbor\"]</peer-group>\n        </config>\n    </neighbor>\n    <neighbor>\n        <neighbor-address>127.0.0.5</neighbor-address>\n        <config>\n            <peer-group>/bgp/neighbors/neighbor/bgp/peer-groups/peer-group[peer-group-name=\"external-neighbor\"]</peer-group>\n        </config>\n    </neighbor>\n        <neighbor>\n        <neighbor-address>127.0.0.6</neighbor-address>\n        <config>\n            <peer-group>/bgp/neighbors/neighbor/bgp/peer-groups/peer-group[peer-group-name=\"external-neighbor\"]</peer-group>\n        </config>\n    </neighbor>\n</neighbors>",
							"options": {
								"raw": {
									"language": "xml"
								}
							}
						},
						"url": {
							"raw": "http://{{lighty-host}}:{{lighty-port}}/restconf/data/openconfig-network-instance:network-instances/network-instance=global-bgp/openconfig-network-instance:protocols/protocol=openconfig-policy-types%3ABGP,bgp-example/bgp-openconfig-extensions:bgp/neighbors",
							"protocol": "http",
							"host": [
								"{{lighty-host}}"
							],
							"port": "{{lighty-port}}",
							"path": [
								"restconf",
								"data",
								"openconfig-network-instance:network-instances",
								"network-instance=global-bgp",
								"openconfig-network-instance:protocols",
								"protocol=openconfig-policy-types%3ABGP,bgp-example",
								"bgp-openconfig-extensions:bgp",
								"neighbors"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Get routing policies",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "admin",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/xml"
					}
				],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "http://{{lighty-host}}:{{lighty-port}}/restconf/data/openconfig-routing-policy:routing-policy/policy-definitions",
					"protocol": "http",
					"host": [
						"{{lighty-host}}"
					],
					"port": "{{lighty-port}}",
					"path": [
						"restconf",
						"data",
						"openconfig-routing-policy:routing-policy",
						"policy-definitions"
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "lighty-host",
			"value": "127.0.0.1",
			"type": "default"
		},
		{
			"key": "lighty-port",
			"value": "8888",
			"type": "default"
		}
	]
}